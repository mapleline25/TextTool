<Window x:Class="TextTool.Wpf.Views.ConvertWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
        xmlns:view="clr-namespace:TextTool.Wpf.Views"
        xmlns:control="clr-namespace:TextTool.Wpf.Library.Controls;assembly=TextTool.Wpf.Library"
        xmlns:converter="clr-namespace:TextTool.Wpf.Library.Converters;assembly=TextTool.Wpf.Library"
        xmlns:vm="clr-namespace:TextTool.Core.ViewModels;assembly=TextTool.Core"
        d:DataContext="{d:DesignInstance Type=vm:ConvertViewModel}"
        mc:Ignorable="d"
        ShowInTaskbar="False"
        WindowStyle="ToolWindow"
        Title="Convert encoding" Height="450" MinHeight="450" Width="600" MinWidth="600">
    <Window.Resources>
        <vm:ConvertViewModel x:Key="VM"/>
    </Window.Resources>
    <Window.DataContext>
        <Binding Source="{StaticResource VM}"/>
    </Window.DataContext>
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <DockPanel>
            <TextBlock Text="File list:"
                       DockPanel.Dock="Top"
                       HorizontalAlignment="Stretch"
                       Margin="0,0,0,3"/>
            <Border x:Name="LeftContainer">
                <ListBox SelectionMode="Single"
                         Height="{Binding ActualHeight, ElementName=LeftContainer}"
                         Width="{Binding ActualWidth, ElementName=LeftContainer}"
                         ItemsSource="{Binding ConvertingItems}"
                         SelectedItem="{Binding SampleItem}"
                         DisplayMemberPath="FileName"/>
            </Border>
        </DockPanel>

        <DockPanel Grid.Row="1" Margin="0,0,5,0">
            <TextBlock Text="Source encoding:"
                       DockPanel.Dock="Top"
                       HorizontalAlignment="Stretch"
                       Margin="0,10,0,5"/>
            <ComboBox  DockPanel.Dock="Top"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       MinWidth="250"
                       ItemsSource="{Binding SourceEncodingItems}"
                       SelectedItem="{Binding SourceEncodingItem}"
                       DisplayMemberPath="Name"/>
            <TextBlock Text="Destination encoding:"
                       DockPanel.Dock="Top"
                       HorizontalAlignment="Stretch"
                       Margin="0,10,0,5"/>
            <DockPanel DockPanel.Dock="Top" HorizontalAlignment="Stretch">
                <ListBox DockPanel.Dock="Left"
                         HorizontalAlignment="Stretch"
                         Margin="0,0,10,0"
                         ItemsSource="{Binding DestinationEncodingItems}"
                         SelectedItem="{Binding DestinationEncodingItem}"
                         Style="{StaticResource EmptyListBoxStyle}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Vertical" MaxHeight="130"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <RadioButton Margin="0,0,10,5"
                                         IsChecked="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}"
                                         GroupName="DestinationEncodingGroup"
                                         Content="{Binding Name}"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </DockPanel>

        <DockPanel Grid.Column="1" Grid.RowSpan="2" Margin="10,0,0,0">
            <TextBlock DockPanel.Dock="Top"
                       HorizontalAlignment="Stretch"
                       Margin="0,0,0,3"
                       Text="{Binding SampleItemTextHint}"/>
            <Border x:Name="RightContainer">
                <ScrollViewer Height="{Binding ActualHeight, ElementName=RightContainer}" Width="{Binding ActualWidth, ElementName=RightContainer}"
                              CanContentScroll="True" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <TextBox Grid.Column="1" Grid.RowSpan="2" 
                             Background="{StaticResource TextBox.Background.LightGray}"
                             Text="{Binding SampleItemText, Mode=OneWay}" 
                             IsReadOnly="True" 
                             TextWrapping="Wrap"
                             FontFamily="Segoe UI, Arial"/>
                </ScrollViewer>
            </Border>
        </DockPanel>

        <DockPanel Grid.Column="1" Grid.Row="2" Margin="15,0,0,0">
            <DockPanel DockPanel.Dock="Top">
                <Button Content="Cancel" DockPanel.Dock="Right" Padding="3" Width="100" Margin="0,10,0,0" 
                        Command="{Binding CancelCommand, RelativeSource={RelativeSource AncestorType=view:ConvertWindow}}"/>
                <Button Content="Convert" DockPanel.Dock="Right" Padding="3" Width="100" Margin="0,10,20,0" 
                        Command="{Binding ConvertCommand, RelativeSource={RelativeSource AncestorType=view:ConvertWindow}}"/>
                <Grid/>
            </DockPanel>
            <Grid/>
        </DockPanel>
        
    </Grid>
</Window>
